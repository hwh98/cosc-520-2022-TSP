<html>
    <head>
        <title>
            Minimum Spanning Tree Weighted Graph (Kruskal)
        </title>
        <script src="./js-graph-libs/vis.js" type="text/javascript"></script>
        <script src="./jsgraphs.js" type="text/javascript"></script>
        <script src="./BB_MST_func.js" type="text/javascript"></script>

        <link href="./js-graph-libs/vis.css" type="text/css" />
    </head>
    
    <body>
        <h2>Minimum Spanning Tree Weighted Graph (Kruskal)</h2>
        <div id="mynetwork"></div>
        
        <script type="text/javascript">
            (function(){
                let numofvertex = 6;
                let g = new jsgraphs.WeightedGraph(numofvertex);

                // 6 vertex example solution - 0- 
                g.addEdge(new jsgraphs.Edge(0, 1, 25));
                g.addEdge(new jsgraphs.Edge(0, 2, 19));
                g.addEdge(new jsgraphs.Edge(0, 3, 19));
                g.addEdge(new jsgraphs.Edge(0, 4, 16));
                g.addEdge(new jsgraphs.Edge(0, 5, 28));
                g.addEdge(new jsgraphs.Edge(1, 2, 24));
                g.addEdge(new jsgraphs.Edge(1, 3, 30));
                g.addEdge(new jsgraphs.Edge(1, 4, 27));
                g.addEdge(new jsgraphs.Edge(1, 5, 17));
                g.addEdge(new jsgraphs.Edge(2, 3, 18));
                g.addEdge(new jsgraphs.Edge(2, 4, 20));
                g.addEdge(new jsgraphs.Edge(2, 5, 23));
                g.addEdge(new jsgraphs.Edge(3, 4, 19));
                g.addEdge(new jsgraphs.Edge(3, 5, 32));
                g.addEdge(new jsgraphs.Edge(4, 5, 41));

                var kruskal = new jsgraphs.KruskalMST(g); 
                var mst = kruskal.mst;
                
                let mst_result = new jsgraphs.Graph(numofvertex); // create the MST graph.
                var g_nodes = [];
                var g_edges = [];
                for(var v=0; v < g.V; ++v){
                    g.node(v).label = 'Node ' + v; // assigned 'Node {v}' as label for node v
                    g_nodes.push({
                       id: v,
                       label: g.node(v).label
                    });
                }
                
                for(var i=0; i < mst.length; ++i) {
                    var e = mst[i];
                    var v = e.either();
                    var w = e.other(v);
                    e.highlighted = true;
                    console.log('(' + v + ', ' + w + '): ' + e.weight);
                    mst_result.addEdge(w, v); // add the MST connected edge to MST graph.
                    g_edges.push({
                        from: v,
                        to: w,
                        length: e.weight,
                        label: '' + e.weight,
                        color: '#ff0000',
                        value: 2
                    });
                }
                
                for(var v = 0; v < g.V; ++v) {
                    
                    var adj_v = g.adj(v);
                    for(var i = 0; i < adj_v.length; ++i) {
                        var e = adj_v[i];
                        var w = e.other(v);
                        if(w > v) continue; // make sure only one edge between w and v since the graph is undirected
                        if(e.highlighted) continue;
                        
                        g_edges.push({
                            from: v,
                            to: w,
                            length: e.weight,
                            label: '' + e.weight
                        });
                    };
                }
                let tourcost;
                let bb_tour;
                [bb_tour, tourcost] = branchandBound(g)
                console.log(bb_tour)
                var nodes = new vis.DataSet(g_nodes);

                // create an array with edges
                var edges = new vis.DataSet(g_edges);

                // create a network
                var container = document.getElementById('mynetwork');
                var data = {
                    nodes: nodes,
                    edges: edges
                };
                var options = {};
                var network = new vis.Network(container, data, options);
            })();
        </script>
    </body>
</html>